<script>
    import { fly } from 'svelte/transition';

    import { addListernEvent } from "api/functions";
    
    let 
        visible = false,
        subTitle,
        title, 
        desc, 
        image;

    addListernEvent ("hud.event", (_visible, _subTitle, _title, _desc, _image) => {
        if (_visible) {
            subTitle = _subTitle;
            title = _title;
            desc = _desc;
            image = _image;
        }
        visible = _visible;
    });

</script>
{#if visible}
    {#if subTitle == "Предложение"}
        <div class="gta5devuse">
            <div class="headuse">
                <div class="iconuse">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_25_866)">
                    <path d="M14.0487 12.4497C14.0487 11.7095 13.4465 11.1073 12.7062 11.1073C11.966 11.1073 11.3638 11.7095 11.3638 12.4497V20.4642C11.3638 20.9814 10.9445 21.4008 10.4272 21.4008C9.91 21.4008 9.49066 20.9814 9.49066 20.4642V12.4497C9.49066 10.8893 10.608 9.58545 12.0845 9.29499V1.82316C12.0845 0.82495 11.2722 0.0157471 10.2701 0.0157471C9.39307 0.0157471 8.64156 0.640694 8.4849 1.50035L5.33525 18.7843C5.09817 20.0852 4.28253 21.2094 3.11681 21.8418L0 23.5325V31.9843L5.31558 29.2734C5.80565 29.0236 6.36087 28.9311 6.90545 29.0086L8.35496 29.2146C9.16589 29.33 9.99071 29.1389 10.6682 28.6785L12.6174 27.353C13.5091 26.7467 14.0436 25.7424 14.0482 24.6676H14.0487V12.4497ZM28.8829 21.8418C27.7172 21.2094 26.9016 20.0853 26.6645 18.7843L23.5149 1.50035C23.3582 0.640694 22.6067 0.0157471 21.7296 0.0157471C20.7275 0.0157471 19.9152 0.82495 19.9152 1.82316V9.29499C21.3918 9.58545 22.5091 10.8893 22.5091 12.4497V20.4642C22.5091 20.9814 22.0898 21.4008 21.5725 21.4008C21.0553 21.4008 20.6359 20.9814 20.6359 20.4642V12.4497C20.6359 11.7095 20.0337 11.1073 19.2935 11.1073C18.5533 11.1073 17.9511 11.7095 17.9511 12.4497V24.6677H17.9515C17.9561 25.7425 18.4907 26.7468 19.3823 27.3531L21.3315 28.6785C22.009 29.1389 22.8338 29.3301 23.6447 29.2147L25.0942 29.0086C25.6388 28.9312 26.194 29.0237 26.6841 29.2735L31.9997 31.9843V23.5325L28.8829 21.8418ZM27.6921 4.44895C27.8946 4.44895 28.0986 4.38357 28.2702 4.24877L30.0184 2.87512C30.4252 2.55556 30.4959 1.96676 30.1762 1.55998C29.8567 1.15325 29.2678 1.08257 28.8611 1.40219L27.1128 2.77584C26.7061 3.0954 26.6354 3.6842 26.955 4.09092C27.0426 4.20265 27.1546 4.29295 27.2823 4.35498C27.41 4.41701 27.5501 4.44915 27.6921 4.44895ZM31.3856 12.9978L29.5124 12.311C29.0269 12.1327 28.4887 12.3821 28.3107 12.8678C28.1326 13.3535 28.382 13.8916 28.8676 14.0696C28.8676 14.0696 30.956 14.8139 31.0631 14.8139C31.4448 14.8139 31.8034 14.5788 31.9425 14.1995C32.1206 13.7139 31.8712 13.1758 31.3856 12.9978ZM27.58 8.41523C27.6579 8.87184 28.054 9.19434 28.5021 9.19434C28.5545 9.19434 31.2208 8.74378 31.2208 8.74378C31.7307 8.65668 32.0735 8.17278 31.9865 7.66291C31.8994 7.15303 31.4153 6.81018 30.9056 6.89729L28.3456 7.33435C27.8357 7.42146 27.4929 7.90536 27.58 8.41523ZM2.01252 2.87512L3.7608 4.24877C3.9255 4.37859 4.12914 4.44911 4.33885 4.44895C4.61633 4.44895 4.89119 4.32607 5.07594 4.09099C5.3955 3.6842 5.32482 3.09547 4.91816 2.77591L3.16988 1.40226C2.76322 1.08276 2.17442 1.15331 1.85474 1.56004C1.53518 1.96676 1.60586 2.55556 2.01252 2.87512ZM2.51852 12.311L0.645365 12.9978C0.15978 13.1759 -0.0895993 13.7139 0.0884754 14.1995C0.227588 14.5788 0.586111 14.8139 0.96786 14.8139C1.07494 14.8139 3.16339 14.0696 3.16339 14.0696C3.64897 13.8915 3.89835 13.3535 3.72028 12.8678C3.54214 12.3822 3.00398 12.1326 2.51852 12.311ZM0.810202 8.74378C0.810202 8.74378 3.47658 9.19434 3.5289 9.19434C3.97696 9.19434 4.37313 8.87178 4.45106 8.41523C4.53816 7.90536 4.19531 7.42146 3.68543 7.33435L1.12545 6.89729C0.615144 6.81018 0.131683 7.1531 0.0445811 7.66291C-0.0425206 8.17278 0.300329 8.65668 0.810202 8.74378Z" fill="#1E1E1E" fill-opacity="0.8"></path>
                    </g>
                    <defs>
                    <clipPath id="clip0_25_866">
                    <rect width="32" height="32" fill="white"></rect>
                    </clipPath>
                    </defs>
                    </svg>
                </div>
                <div class="infouse">
                    <h1>{title}</h1>
                    <p>{desc}</p>
                </div>
            </div>
            <div class="lineuse">
                <div class="linus"></div>
            </div>
            <div class="btnsuse">
                <div class="btnus">
                    <span>Y</span>
                    <p>Принять</p>
                    </div>
                <div class="btnus">
                    <span>N</span>
                    <p>Отказаться</p>
                </div>
            </div>
        </div>
    {:else}
        <div class="hudevo__event" in:fly={{ y: -50, duration: 500 }} out:fly={{ y: -50, duration: 250 }}>
            <div class="hudevo__event_image" style="background-image: url({document.cloud}events/{image})" /> 
            <div class="hudevo__notification_subtitle mt-51">{subTitle}</div>
            <div class="hudevo__notification_title">
                {title}
            </div>
            <div class="hudevo__notification_text medium">
                {desc}
            </div>
        </div>
    {/if}
{/if}